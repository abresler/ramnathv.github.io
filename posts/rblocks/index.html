<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="http://ramnathv.github.io">
  <meta name="twitter:title" content="rBlocks">
  <meta name="twitter:description" content="This is a post on my experiment at trying to create a visual tool to teach R. It is motivated by the highly talked about ipythonblocks. ">
  <meta name="twitter:image" content="http://ramnathv.github.io/images/ramnath.jpg">
  <meta name="twitter:site" content="@ramnath_vaidya">
  <meta name="twitter:creator" content="@ramnath_vaidya">
  
  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  
    <title>
        rBlocks &middot; Addicted to R
      </title>
  
    <!-- CSS -->
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/poole.css">
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/syntax.css">
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/lanyon.css">
    <link rel="stylesheet" href="../../libraries/highlighters/highlight.js/css/solarized_light.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
    <!-- <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Gentium+Book+Basic|Lato:400' type='text/css'> -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="../../libraries/frameworks/lanyon/public/favicon.ico">
  
    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
    
    <!-- Source: http://developerdrive.developerdrive.netdna-cdn.com/wp-content/uploads/2013/07/scroll-to-top.html 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  
    <style>
  	.back-to-top {
  		position: fixed;
  		bottom: 2em;
  		right: 5px;
  		text-decoration: none;
  		color: #000000;
  		background-color: rgba(235, 235, 235, 0.80);
  		font-size: 12px;
  		padding: 1em;
  		display: none;
  	}
  
  	.back-to-top:hover {	
  		background-color: rgba(135, 135, 135, 0.50);
  	}	
  	</style>
    -->
  </head>  
  

  <body class='theme-base-09 '>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
         styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
    
    <!-- Toggleable sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-item">
        <p>I am a professor of operations management, addicted to R and data visualization.
</p>
      </div>
    
      <nav class="sidebar-nav">
        <a class="sidebar-nav-item active" href="/">
          <i class='fa fa-home'> </i>  Home
        </a>
        <!-- <a class="sidebar-nav-item" href="/archive/v.zip">
          <i class='fa fa-download'> </i>  Download
        </a> -->
        <a class="sidebar-nav-item" href="/research">
      <i class='fa fa-cogs'> </i>  Research
    </a>
    <a class="sidebar-nav-item" href="/publications">
      <i class='fa fa-pencil-square'> </i>  Publications
    </a>
    <a class="sidebar-nav-item" href="/projects">
      <i class='fa fa-puzzle-piece'> </i>  Projects
    </a>
    <a class="sidebar-nav-item" href="/software">
      <i class='fa fa-code'> </i>  Software
    </a>
    <a class="sidebar-nav-item" href="/blog">
      <i class='fa fa-archive'> </i>  Blog
    </a>
    <a class="sidebar-nav-item" href="">
          <i class='fa fa-github'> </i> GitHub
        </a>
        <!-- <span class="sidebar-nav-item">Currently v</span> -->
      </nav>
    
      <div class="sidebar-item">
        <p>
          &copy; 2014. All rights reserved.
        </p>
      </div>
    </div>    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Addicted to R</a>
            <small>academic/hacker</small>
            <div style='float:right;'>
            <a href="/blog">
              <i class='fa fa-archive'> </i>
            </a>
            <a href="http://twitter.com/ramnath_vaidya">
              <i class='fa fa-twitter'> </i>
            </a>
            <a href="http://github.com/ramnathv">
              <i class='fa fa-github'> </i>
            </a>
            </div>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
          <h1 class="post-title">rBlocks</h1>
          <span class="post-date">2014-03-12</span>
          
<p class='message'><a href="rblocks.R">rBlocks</a> is an attempted port of <a href="http://nbviewer.ipython.org/github/jiffyclub/ipythonblocks/blob/master/demos/ipythonblocks_demo.ipynb">ipythonblocks</a> to R, to provide a fun and visual tool to explore data structures and control flow.</p>

<div style='display:block; margin: auto auto;'>
<img src="assets/fig/matrix-1.png" title="plot of chunk matrix-df" alt="plot of chunk matrix-df" style="display:inline" width=170px/>
<img src="assets/fig/matrix-df1.png" title="plot of chunk matrix-df" alt="plot of chunk matrix-df" style="display:inline" width=170px />
<img src="assets/fig/matrix-df2.png" title="plot of chunk matrix-df" alt="plot of chunk matrix-df" style="display:inline" width=170px />
<img src="assets/fig/apply-df.png" title="plot of chunk matrix-df" alt="plot of chunk matrix-df" style="display:inline" width=170px />
</div>

<p>One of the challenges associated with learning any programming language is being able to access and manipulate data structures. I have often heard from students that they find it hard to understand the different ways of slicing and dicing data in R. </p>

<p>As I researched different solutions to teach these concepts more effectively, I chanced upon the wonderful world of <a href="http://nbviewer.ipython.org/github/jiffyclub/ipythonblocks/blob/master/demos/ipythonblocks_demo.ipynb">ipythonblocks</a>. Here is a brief description of the tool by its creator <a href="http://penandpants.com/">Matt Davis</a>.</p>

<p class='message'>ipythonblocks is a teaching tool that allows students to experiment with Python flow control concepts and immediately see the effects of their code represented in a colorful, attractive way. </p>

<p>The more I explored ipythonblocks, the more I became convinced that it is a wonderful way to introduce basic concepts of a programming language in a fun and visual manner. I wanted to bring this tool to the world of R, and so I created <a href="rblocks.R">rBlocks</a>. </p>

<p>Currently, it is just a set of functions, but I plan to develop it into a full fledged package. So why am I blogging about it now, if it is still work-not-ready-to-be-shown? Well, I am looking to share what I have done so far, give you a demo of what concepts of the language it can help explain, and most importantly seek feedback and attract contributions!</p>

<p>Without any further talk, let me dig straight into rBlocks. If you want to follow along, please download <a href="rblocks.R">rBlocks.R</a> and source it into your workspace.</p>

<h3>Vectors</h3>

<p>The workhorse function in rBlocks is <code>block_grid</code>, which creates a data structure. It currently supports creating a <code>vector</code>, <code>matrix</code> and <code>data.frame</code>. Let us use <code>block_grid</code> to create a vector and see how we can use it to illustrate some concepts of programming.</p>

<pre><code class="r">grid1 &lt;- block_grid(5, type = &quot;vector&quot;)
grid1
</code></pre>

<p><img src="assets/fig/vector.png" alt="plot of chunk vector"> </p>

<p>So how can we use this to teach indexing? Well, for starters, we can show the different ways to access elements of a vector (using positive integers, negative integers, logical vectors etc. as indices)</p>

<pre><code class="r">## index using positive integers
grid1[1:2] &lt;- &quot;red&quot;
grid1
</code></pre>

<p><img src="assets/fig/vector-11.png" alt="plot of chunk vector-1"> </p>

<pre><code class="r">
# index using negative integers
grid2 &lt;- block_grid(5, type = &quot;vector&quot;)
grid2[-c(1:3)] &lt;- &quot;blue&quot;
grid2
</code></pre>

<p><img src="assets/fig/vector-12.png" alt="plot of chunk vector-1"> </p>

<pre><code class="r">
# index using logical vectors
grid3 &lt;- block_grid(5, type = &quot;vector&quot;)
grid3[c(T, F, T, F, T)] &lt;- &quot;darkred&quot;
grid3
</code></pre>

<p><img src="assets/fig/vector-13.png" alt="plot of chunk vector-1"> </p>

<p>One challenging concept for those new to R is the <a href="http://cran.r-project.org/doc/manuals/R-intro.html#The-recycling-rule">recycling rule</a>. rBlocks can be used to explain this concept visually. </p>

<pre><code class="r">grid4 &lt;- block_grid(5, type = &quot;vector&quot;)
grid4[c(T, F)] &lt;- &quot;blue&quot;
grid4
</code></pre>

<p><img src="assets/fig/vector-2.png" alt="plot of chunk vector-2"> </p>

<p>In this example, we are using a logical vector <code>c(T, F)</code> to access elements of the vector <code>grid4</code>. According to the recycling rule, this short vector is expanded out as <code>c(T, F, T, F, T)</code> to match the length of <code>grid4</code>. The grid image makes on top makes it easy to understand what is happening.</p>

<h3>Control Structures</h3>

<p>rBlocks can be used to motivate users to learn about basic control structures. For this example, we will create a <code>matrix</code> and write a <code>for</code> loop to set elements on the diagonal to the color <code>firebrick</code> (thanks to <a href="alyssafrazee.com">Alyssa Frazee</a> and the <a href="http://alyssafrazee.com/RSkittleBrewer.html">RSkittleBrewer</a>  package for making me more color aware).</p>

<pre><code class="r">grid5 &lt;- block_grid(5, 5, type = &quot;matrix&quot;)
for (i in 1:5) {
    grid5[i, i] &lt;- &quot;firebrick&quot;
}
grid5
</code></pre>

<p><img src="assets/fig/matrix-1.png" alt="plot of chunk matrix-1"> </p>

<p>It can be used to explain subtle differences between indexing <code>data.frames</code> and <code>matrices</code> like in the example below.</p>

<pre><code class="r"># single index accesses first element of matrix
grid6 &lt;- block_grid(5, 5, type = &quot;matrix&quot;)
grid6[1] &lt;- &quot;dodgerblue3&quot;
grid6
# single index accesses first column of data.frame
grid7 &lt;- block_grid(5, 5, type = &quot;data.frame&quot;)
grid7[1] &lt;- &quot;dodgerblue3&quot;
grid7
</code></pre>

<p><img src="assets/fig/matrix-df1.png" title="plot of chunk matrix-df" alt="plot of chunk matrix-df" style="display:inline" /><img src="assets/fig/matrix-df2.png" title="plot of chunk matrix-df" alt="plot of chunk matrix-df" style="display:inline" /></p>

<p>We can use it to teach about <code>apply</code> functions. For example, let us use <code>apply</code> to change the light green cells in <code>grid7</code> to <code>olivedrab</code> and the blue cells to <code>darkslategray</code>.</p>

<pre><code class="r">grid8 = apply(grid7, 2, function(df) {
    if (sum(df == &quot;dodgerblue3&quot;) == 5) {
        df[] = &quot;darkslategrey&quot;
    } else {
        df[] = &quot;olivedrab&quot;
    }
    return(df)
})
display(grid8)
</code></pre>

<p><img src="assets/fig/apply-df.png" alt="plot of chunk apply-df"> </p>

<p class='message'>We need the <code>display</code> function here, since <code>apply</code> drops attributes, and my implementation of the grid needs the object to be marked with the <code>block</code> class to overlod the print method (I am sure there are more elegant implementations that can handle this better, without bothering the user. Any thoughts?)</p>

<p>One of the gotchas in R is how it coerces data structures when subsetting. Here is a simple way to visualize this behavior with <code>data.frames</code>.</p>

<pre><code class="r">grid9 = block_grid(5, 5)
# extracting the first column converts it to a vector
grid10 = grid9[, 1]

grid9
display(grid10)
</code></pre>

<p><img src="assets/fig/coercion1.png" title="plot of chunk coercion" alt="plot of chunk coercion" style="display:inline" /><img src="assets/fig/coercion2.png" title="plot of chunk coercion" alt="plot of chunk coercion" style="display:inline" /></p>

<p>I can go on-and-on, but I think you get my message. What I have shown is barely scratching the surface. So, what is my vision with this package? </p>

<ol>
<li><p>For starters, I want a more robust implementation of the core functions so that it prints as a grid no matter what operations a user runs on it! I like the ipythonblocks API, and so something closer to it would be awesome.</p></li>
<li><p>I want to be able to model more data structures. For example, <code>lists</code> and <code>arrays</code>. A visual model for <code>lists</code> would allow clarifying the difference between <code>[[</code> and <code>[</code>!</p></li>
<li><p>A better visual grid. Maybe <code>d3js</code> with hover, some text labels displaying actual data? What about some animation to visualize a loop or an <code>lapply</code> call.</p></li>
<li><p>Finally, a mechanism that would allow R users to submit examples illustrating different concepts using <code>rBlocks</code> that teachers of the language can fork and reuse for their own lessons.</p></li>
</ol>

<p>I might be way-off with my wish-list, but this is my way of giving back to the wonderful R community that has given me so much! I am open to feedback, suggestions and contributions!</p>

<style>
 p {text-align: justify;}
</style>

        </div>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'ramnathv'; // required: replace example with your forum shortname
        
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>        
      </div>
      <!-- <a href="#" class="back-to-top">Back to Top</a> -->
    </div>
  
  <script type="text/javascript">
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '53207fc1e32bb4498d004943');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>  </body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="../../libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>